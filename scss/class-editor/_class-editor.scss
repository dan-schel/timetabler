@use "../css-template/import" as template;
@use "picker-swatches";
@use "../colors";
@use "common";

// The styles applied to the edit class menu.
@mixin main {
  flex-grow: 1;
  padding: 1rem;
  padding-top: 1.5rem;
  gap: 1rem;

  // Only show .when-edit html when the .new class is NOT on the
  // #edit-class-menu.
  &.new {
    .when-edit {
      @include template.gone;
    }
  }

  // Only show .when-new html when the .new class is on the #edit-class-menu.
  &:not(.new) {
    .when-new {
      @include template.gone;
    }
  }

  // The "Edit/add class" title.
  h2 {
    font-size: 1.2rem;
    font-weight: bold;
    color: var(--color-ink-100);
  }

  #class-editor-error-ui {
    @include common.error-ui;
    //margin-top: 0.5rem;
  }

  // Only show error UI when the .error class is on the #edit-class-menu.
  &:not(.error) {
    .when-error {
      @include template.gone;
    }
  }

  p.label {
    @include template.no-select;
  }

  .field > .label {
    margin-bottom: 0.25rem;
  }

  label.text-input {
    cursor: text;

    input[type="text"] {
      @include template.input-filled-neutral;
      height: 2rem;
      padding: 0rem 1rem;
    }
  }

  #class-editor-color-picker {
    @include picker-swatches.swatches($content-class: "picker-content");
    @include colors.gradient-classes($direction: "to bottom right");

    // The swatch only fill 80% of their diameter on a good day, to move them
    // over a smidge to line up with the edge better.
    margin-left: -0.2rem;
    margin-right: -0.2rem;
    margin-bottom: -0.2rem;

    .picker-content {
      width: 2rem;
      height: 2rem;
      --background: var(--gradient);
    }
  }

  .switch {
    @include template.checkbox-switch(
      $graphic-class: "switch-graphic",
      $content-class: "switch-content"
    );

    .switch-content {
      @include template.content-text;
      margin-left: 1rem;
    }
  }

  #class-editor-add-option-button {
    @include template.button-filled-neutral;
    @include template.content-text-icon;
    padding: 0rem 0.5rem;
    height: 1.5rem;
    gap: 0.25rem;
    align-self: flex-start;

    p {
      font-size: 0.75rem;
      font-weight: bold;
    }
  }

  #class-editor-options {
    flex-grow: 1;
    gap: 0.5rem;

    .option {
      border: 2px solid var(--color-ink-30);
      border-radius: 0.5rem;
      padding: 0.5rem 2.5rem 0.5rem 2.5rem;
      gap: 0.5rem;
      position: relative;
      overflow: hidden;
      min-height: 3rem;
      justify-content: center;

      .number {
        position: absolute;
        top: 0;
        left: 0;
        width: 1.5rem;
        padding: 0.25rem 0;

        background-color: var(--color-ink-10);
        border-bottom-right-radius: 0.25rem;
        font-size: 0.75rem;
        font-weight: bold;
        text-align: center;
      }
      .delete-button {
        @include template.button-hover;
        @include template.content-text-icon;
        position: absolute;
        width: 2rem;
        height: 2rem;
        top: 50%;
        right: 0.5rem;
        transform: translate(0%, -50%);

        .icon {
          font-size: 1.2rem;
        }
      }
    }
  }

  #class-editor-submit-button {
    @include template.button-filled;
    @include template.content-text-icon;
    height: 2.5rem;
    gap: 0.5rem;
    .icon {
      font-size: 1.2rem;
    }
  }
}
